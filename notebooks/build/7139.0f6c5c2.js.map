{"version":3,"file":"7139.0f6c5c2.js","mappings":"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","sources":["webpack://_JUPYTERLAB.CORE_OUTPUT/../packages/apputils-extension/lib/kernelstatus.js","webpack://_JUPYTERLAB.CORE_OUTPUT/../packages/apputils-extension/lib/urlresolver.js","webpack://_JUPYTERLAB.CORE_OUTPUT/../packages/apputils-extension/lib/index.js"],"sourcesContent":["// Copyright (c) Jupyter Development Team.\n// Distributed under the terms of the Modified BSD License.\nimport { IToolbarWidgetRegistry, ReactWidget } from '@jupyterlab/apputils';\nimport { ILoggerRegistry } from '@jupyterlab/logconsole';\nimport { Signal } from '@lumino/signaling';\nimport React, { useState, useEffect } from 'react';\n/**\n * Track the current execution status of a kernel.\n */\nexport class KernelStatus {\n    constructor() {\n        this._status = 'idle';\n        this._statusChanged = new Signal(this);\n    }\n    /**\n     * Current execution status of the kernel.\n     */\n    get status() {\n        return this._status;\n    }\n    /**\n     * Signal emitted when the kernel status changes.\n     */\n    get statusChanged() {\n        return this._statusChanged;\n    }\n    /**\n     * Set the current execution status.\n     *\n     * @param status - The new status\n     */\n    setStatus(status) {\n        if (this._status === status) {\n            return;\n        }\n        this._status = status;\n        this._statusChanged.emit(status);\n    }\n}\n/**\n * A React component for displaying kernel status.\n */\nfunction KernelStatusComponent(props) {\n    const [status, setStatus] = useState(props.model.status);\n    useEffect(() => {\n        const onChange = (_, newStatus) => {\n            setStatus(newStatus);\n        };\n        props.model.statusChanged.connect(onChange);\n        return () => {\n            props.model.statusChanged.disconnect(onChange);\n        };\n    }, [props.model]);\n    const isError = status === 'dead';\n    const isIdle = status === 'idle';\n    const isBusy = !isError && !isIdle;\n    // Return the appropriate icon and text based on status\n    return (React.createElement(\"div\", { className: 'jp-KernelStatus', onClick: props.onClick, style: { cursor: 'pointer' }, title: \"Click to open kernel logs\" },\n        React.createElement(\"div\", { className: \"jp-KernelStatus-icon-container\" },\n            isBusy && (React.createElement(\"div\", { className: \"jp-KernelStatus-spinner\" },\n                React.createElement(\"svg\", { viewBox: \"0 0 24 24\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\" },\n                    React.createElement(\"circle\", { className: \"jp-KernelStatus-spinner-track\", cx: \"12\", cy: \"12\", r: \"10\", stroke: \"currentColor\", strokeWidth: \"4\" }),\n                    React.createElement(\"path\", { className: \"jp-KernelStatus-spinner-path\", fill: \"currentColor\", d: \"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\" })))),\n            isIdle && (React.createElement(\"div\", { className: \"jp-KernelStatus-success\" },\n                React.createElement(\"svg\", { viewBox: \"0 0 24 24\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\" },\n                    React.createElement(\"path\", { d: \"M22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12Z\", stroke: \"currentColor\", strokeWidth: \"2\" }),\n                    React.createElement(\"path\", { d: \"M8 12L11 15L16 9\", stroke: \"currentColor\", strokeWidth: \"2\", strokeLinecap: \"round\", strokeLinejoin: \"round\" })))),\n            isError && (React.createElement(\"div\", { className: \"jp-KernelStatus-error\" },\n                React.createElement(\"svg\", { viewBox: \"0 0 24 24\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\" },\n                    React.createElement(\"path\", { d: \"M22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12Z\", stroke: \"currentColor\", strokeWidth: \"2\" }),\n                    React.createElement(\"path\", { d: \"M15 9L9 15M9 9L15 15\", stroke: \"currentColor\", strokeWidth: \"2\", strokeLinecap: \"round\", strokeLinejoin: \"round\" })))))));\n}\n/**\n * A widget displaying the kernel status.\n */\nexport class KernelStatusWidget extends ReactWidget {\n    /**\n     * Construct a new kernel status widget.\n     */\n    constructor(options) {\n        super();\n        this._model = options.model;\n        this._onClick = options.onClick || (() => { });\n        this.addClass('jp-KernelStatus-widget');\n        this.addClass('jp-mod-highlighted');\n        // Make the widget clickable\n        this.node.style.cursor = 'pointer';\n    }\n    /**\n     * The kernel status model used by the widget.\n     */\n    get model() {\n        return this._model;\n    }\n    /**\n     * Render the kernel status widget.\n     */\n    render() {\n        return React.createElement(KernelStatusComponent, { model: this._model, onClick: this._onClick });\n    }\n}\n/**\n * A plugin that provides a kernel status model and widget.\n */\nexport const kernelStatusPlugin = {\n    id: '@jupyterlite/apputils-extension:kernel-status',\n    description: 'Kernel status indicator for JupyterLite',\n    autoStart: true,\n    optional: [IToolbarWidgetRegistry, ILoggerRegistry],\n    activate: (app, toolbarRegistry, loggerRegistry) => {\n        const { commands } = app;\n        // Register the widget with the toolbar registry\n        if (toolbarRegistry) {\n            // Add the kernel status widget to the notebook toolbar\n            toolbarRegistry.addFactory('Notebook', 'kernelStatus', (panel) => {\n                // Create the kernel status model\n                const kernelStatus = new KernelStatus();\n                const sessionContext = panel.sessionContext;\n                // Update status when kernel status changes\n                sessionContext.statusChanged.connect((_, status) => {\n                    kernelStatus.setStatus(status);\n                });\n                if (loggerRegistry) {\n                    const path = panel.context.path;\n                    const logger = loggerRegistry.getLogger(path);\n                    logger === null || logger === void 0 ? void 0 : logger.contentChanged.connect((_, args) => {\n                        const length = logger.outputAreaModel.length;\n                        if (args === 'append' && length > 0) {\n                            // get the latest message\n                            const latestMessage = logger.outputAreaModel.get(length - 1);\n                            const level = latestMessage.level;\n                            // rely on kernels properly reporting a critical state\n                            if (level === 'critical') {\n                                kernelStatus.setStatus('dead');\n                            }\n                            else if (level !== 'metadata') {\n                                // if new messages are logged, set the status back to busy\n                                kernelStatus.setStatus('busy');\n                            }\n                        }\n                    });\n                }\n                return new KernelStatusWidget({\n                    model: kernelStatus,\n                    onClick: () => {\n                        commands.execute('logconsole:open');\n                    },\n                });\n            });\n        }\n    },\n};\n//# sourceMappingURL=kernelstatus.js.map","import { PathExt } from '@jupyterlab/coreutils';\nimport { RenderMimeRegistry, IUrlResolverFactory } from '@jupyterlab/rendermime';\nclass UrlResolver extends RenderMimeRegistry.UrlResolver {\n    constructor(options) {\n        super(options);\n        this._mimeTypes = {\n            '.apng': 'image/apng',\n            '.avif': 'image/avif',\n            '.svg': 'image/svg+xml',\n            '.png': 'image/png',\n            '.jpg': 'image/jpeg',\n            '.jpeg': 'image/jpeg',\n            '.gif': 'image/gif',\n            '.webp': 'image/webp',\n            '.bmp': 'image/bmp',\n            '.ico': 'image/x-icon',\n            '.tiff': 'image/tiff',\n        };\n        this._manager = options.contents;\n    }\n    async resolveUrl(url, context) {\n        const acceptsBase64 = context &&\n            (context.attribute === 'src' ||\n                (context.attribute === 'href' && context.tag !== 'a'));\n        if (this.isLocal(url) && acceptsBase64) {\n            const cwd = encodeURI(PathExt.dirname(this.path));\n            url = PathExt.resolve(cwd, url);\n            const extension = PathExt.extname(url).toLowerCase();\n            if (extension && this._mimeTypes[extension]) {\n                const reply = await this._manager.get(url, { content: true });\n                // Binary images (png/jpg etc.) will be returned in the base64 format already,\n                // but svg images will be returned as text which needs base64 encoding.\n                const encoded = reply.format === 'base64' ? reply.content : window.btoa(reply.content);\n                return `data:${this._mimeTypes[extension]};base64,${encoded}`;\n            }\n        }\n        return super.resolveUrl(url);\n    }\n}\nexport const urlResolverPlugin = {\n    id: '@jupyterlite/apputils-extension:url-resolver',\n    autoStart: true,\n    description: 'A URL resolver which converts supported image URLs into base64 encoded data strings.',\n    provides: IUrlResolverFactory,\n    activate: (app) => {\n        return {\n            createResolver: (options) => new UrlResolver(options),\n        };\n    },\n};\n//# sourceMappingURL=urlresolver.js.map","// Copyright (c) Jupyter Development Team.\n// Distributed under the terms of the Modified BSD License.\nimport { PageConfig, URLExt } from '@jupyterlab/coreutils';\nimport { JupyterFrontEnd, JupyterLab, IRouter } from '@jupyterlab/application';\nimport { ILicensesClient, ICommandPalette, MainAreaWidget, WidgetTracker, IWindowResolver, } from '@jupyterlab/apputils';\nimport { IPluginManager, Plugins } from '@jupyterlab/pluginmanager';\nimport { ITranslator, ITranslatorConnector, nullTranslator, } from '@jupyterlab/translation';\nimport { extensionIcon } from '@jupyterlab/ui-components';\nimport { ILiteRouter } from '@jupyterlite/application';\nimport { LiteLicensesClient, LitePluginListModel, LiteTranslatorConnector, IWorkspaceRouter, } from '@jupyterlite/apputils';\nimport { kernelStatusPlugin } from './kernelstatus';\nimport { urlResolverPlugin } from './urlresolver';\n/**\n * The command IDs used by the apputils extension.\n */\nvar CommandIDs;\n(function (CommandIDs) {\n    /**\n     * The command ID for opening the plugin manager.\n     */\n    CommandIDs.openPluginManager = 'apputils:open-plugin-manager';\n})(CommandIDs || (CommandIDs = {}));\n/**\n * The client for fetching licenses data.\n */\nconst licensesClient = {\n    id: '@jupyterlite/application-extension:licenses-client',\n    autoStart: true,\n    provides: ILicensesClient,\n    activate: (app) => {\n        return new LiteLicensesClient();\n    },\n};\n/**\n * A plugin for managing the status of other plugins.\n */\nexport const pluginManagerPlugin = {\n    id: '@jupyterlite/application-extension:plugin-manager',\n    description: 'Plugin manager viewer',\n    autoStart: true,\n    optional: [JupyterLab.IInfo, ITranslator, ICommandPalette],\n    provides: IPluginManager,\n    activate: (app, info, translator, palette) => {\n        var _a;\n        const availablePlugins = (_a = info === null || info === void 0 ? void 0 : info.availablePlugins) !== null && _a !== void 0 ? _a : [];\n        if (availablePlugins.length === 0) {\n            return {\n                open: async () => {\n                    // eslint-disable-next-line no-console\n                    console.info('The application does not contain information about plugins');\n                },\n            };\n        }\n        const { commands, serviceManager, shell } = app;\n        translator = translator !== null && translator !== void 0 ? translator : nullTranslator;\n        const trans = translator.load('jupyterlab');\n        const category = trans.__('Plugin Manager');\n        const widgetLabel = trans.__('Advanced Plugin Manager');\n        const namespace = 'plugin-manager';\n        const tracker = new WidgetTracker({\n            namespace: namespace,\n        });\n        function createWidget(args) {\n            const model = new LitePluginListModel({\n                ...args,\n                pluginData: {\n                    availablePlugins,\n                },\n                serverSettings: serviceManager.serverSettings,\n                extraLockedPlugins: [pluginManagerPlugin.id],\n                translator: translator !== null && translator !== void 0 ? translator : nullTranslator,\n            });\n            const content = new Plugins({\n                model,\n                translator: translator !== null && translator !== void 0 ? translator : nullTranslator,\n            });\n            content.title.label = widgetLabel;\n            content.title.icon = extensionIcon;\n            content.title.caption = trans.__('Plugin Manager');\n            const main = new MainAreaWidget({ content, reveal: model.ready });\n            return main;\n        }\n        commands.addCommand(CommandIDs.openPluginManager, {\n            label: widgetLabel,\n            execute: (args) => {\n                const main = createWidget(args);\n                shell.add(main, 'main', { type: 'Plugins' });\n                // add to tracker so it can be restored, and update when choices change\n                void tracker.add(main);\n                main.content.model.trackerDataChanged.connect(() => {\n                    void tracker.save(main);\n                });\n                return main;\n            },\n        });\n        if (palette) {\n            palette.addItem({ command: CommandIDs.openPluginManager, category });\n        }\n        return {\n            open: () => {\n                return app.commands.execute(CommandIDs.openPluginManager);\n            },\n        };\n    },\n};\n/**\n * The main translator connector plugin.\n */\nconst translatorConnector = {\n    id: '@jupyterlite/application-extension:translator-connector',\n    description: 'Provides the application translation connector.',\n    autoStart: true,\n    provides: ITranslatorConnector,\n    activate: (app) => {\n        return new LiteTranslatorConnector();\n    },\n};\n/**\n * The default window name resolver provider.\n *\n * This adds a dependency on `IWorkspaceRouter`\n */\nconst resolver = {\n    id: '@jupyterlite/application-extension:resolver',\n    autoStart: true,\n    provides: IWindowResolver,\n    requires: [JupyterFrontEnd.IPaths, IRouter, IWorkspaceRouter],\n    activate: async (app, paths, router, workspaceRouter) => {\n        const url = new URL(window.location.href);\n        const workspace = url.searchParams.get('workspace') ||\n            url.searchParams.get('clone') ||\n            PageConfig.getOption('workspace') ||\n            'default';\n        const candidate = workspace ? workspace : PageConfig.defaultWorkspace;\n        const solver = {\n            name: candidate,\n        };\n        try {\n            return solver;\n        }\n        catch (error) {\n            const { workspaces } = app.serviceManager;\n            const oldWorkspace = await workspaces.fetch(workspace);\n            const newWorkspaceId = `${workspace.split('-')[0]}-${+new Date()}`;\n            await workspaces.save(newWorkspaceId, oldWorkspace);\n            const appUrl = PageConfig.getOption('appUrl');\n            url.pathname = appUrl;\n            url.searchParams.set('clone', newWorkspaceId);\n            url.searchParams.delete('workspace');\n            const newUrl = URLExt.join(appUrl, url.toString().split(appUrl)[1]);\n            router.navigate(newUrl);\n            return solver;\n        }\n    },\n};\n/**\n * A custom plugin for workspace files and commands\n */\nconst workspaces = {\n    id: '@jupyterlite/application-extension:workspaces',\n    requires: [ILiteRouter],\n    autoStart: true,\n    provides: IWorkspaceRouter,\n    activate: (app, liteRouter) => {\n        const appUrl = PageConfig.getOption('appUrl');\n        const baseUrl = PageConfig.getOption('baseUrl');\n        if (appUrl) {\n            const workspaceUrl = URLExt.join(appUrl, 'workspaces') + '/';\n            const autoUrl = URLExt.join(baseUrl, 'doc/workspaces/auto-');\n            liteRouter.addTransformer({\n                id: workspaces.id,\n                transform: ({ options, url }) => {\n                    if (options.hard && url.pathname.startsWith(workspaceUrl)) {\n                        const workspace = url.pathname.replace(workspaceUrl, '');\n                        url.pathname = appUrl;\n                        url.searchParams.set('workspace', workspace);\n                    }\n                    if (options.hard && url.pathname.startsWith(autoUrl)) {\n                        url.pathname = appUrl;\n                        url.searchParams.delete('reset');\n                    }\n                    return { url, options };\n                },\n            });\n        }\n        return {};\n    },\n};\nconst plugins = [\n    licensesClient,\n    pluginManagerPlugin,\n    translatorConnector,\n    workspaces,\n    kernelStatusPlugin,\n    resolver,\n    urlResolverPlugin,\n];\nexport default plugins;\n//# sourceMappingURL=index.js.map"],"names":["KernelStatus","constructor","this","_status","_statusChanged","Signal","status","statusChanged","setStatus","emit","KernelStatusComponent","props","useState","model","useEffect","onChange","_","newStatus","connect","disconnect","isError","isIdle","isBusy","className","onClick","style","cursor","title","viewBox","fill","xmlns","cx","cy","r","stroke","strokeWidth","d","strokeLinecap","strokeLinejoin","KernelStatusWidget","ReactWidget","options","super","_model","_onClick","addClass","node","render","kernelStatusPlugin","id","description","autoStart","optional","IToolbarWidgetRegistry","ILoggerRegistry","activate","app","toolbarRegistry","loggerRegistry","commands","addFactory","panel","kernelStatus","sessionContext","path","context","logger","getLogger","contentChanged","args","length","outputAreaModel","level","get","execute","UrlResolver","RenderMimeRegistry","_mimeTypes","_manager","contents","resolveUrl","url","acceptsBase64","attribute","tag","isLocal","cwd","encodeURI","PathExt","dirname","resolve","extension","extname","toLowerCase","reply","content","encoded","format","window","btoa","urlResolverPlugin","provides","IUrlResolverFactory","createResolver","CommandIDs","openPluginManager","licensesClient","ILicensesClient","LiteLicensesClient","pluginManagerPlugin","JupyterLab","IInfo","ITranslator","ICommandPalette","IPluginManager","info","translator","palette","_a","availablePlugins","open","async","console","serviceManager","shell","trans","nullTranslator","load","category","__","widgetLabel","tracker","WidgetTracker","namespace","addCommand","label","main","LitePluginListModel","pluginData","serverSettings","extraLockedPlugins","Plugins","icon","extensionIcon","caption","MainAreaWidget","reveal","ready","createWidget","add","type","trackerDataChanged","save","addItem","command","translatorConnector","ITranslatorConnector","LiteTranslatorConnector","resolver","IWindowResolver","requires","JupyterFrontEnd","IPaths","IRouter","IWorkspaceRouter","paths","router","workspaceRouter","URL","location","href","workspace","searchParams","PageConfig","getOption","solver","name","defaultWorkspace","error","workspaces","oldWorkspace","fetch","newWorkspaceId","split","Date","appUrl","pathname","set","delete","newUrl","URLExt","join","toString","navigate","ILiteRouter","liteRouter","baseUrl","workspaceUrl","autoUrl","addTransformer","transform","hard","startsWith","replace"],"sourceRoot":""}